(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(17),o=n.n(c),r=n(8),a=n(3),s=n(1),u=n(5),i=n.n(u),l="/api/persons",f=function(){return i.a.get(l)},d=function(e){return i.a.post(l,e)},j=function(e,t){return i.a.put("".concat(l,"/").concat(e),t)},b=function(e,t){return i.a.delete("".concat(l,"/").concat(e),t)},h=n(0),p=function(e){var t=Object(s.useState)(""),n=Object(a.a)(t,2),c=n[0],o=n[1],r=Object(s.useState)(""),u=Object(a.a)(r,2),i=u[0],l=u[1];return Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{type:"text",name:"name",onChange:function(e){console.log(e.target.value),o(e.target.value)},value:c}),Object(h.jsx)("br",{}),"phonenumber: ",Object(h.jsx)("input",{type:"text",name:"number",onChange:function(e){console.log(e.target.value),l(e.target.value)},value:i})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(t){t.preventDefault(),e.onSubmit({name:c,phonenumber:i}),l(""),o("")},type:"submit",children:"add"})})]})},m=function(e){var t=e.persons,n=e.filter,c=e.handleDelete;return Object(h.jsx)("div",{children:Object(h.jsx)("ul",{children:t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})).map((function(e){return Object(h.jsxs)("li",{children:[e.name," ",e.phonenumber,Object(h.jsx)("button",{onClick:function(){return window.confirm("Are you sure you wish to delete this contact?")&&c(e)},children:"delete"})]},e.name)}))})})},O=function(e){var t=e.message;return null===t?null:Object(h.jsx)("div",{className:t.type,children:t.text})},x=function(e){return Object(h.jsxs)("div",{children:["filter: ",Object(h.jsx)("input",{type:"text",name:"filter",onChange:e.filterHandler,value:e.filter})]})},v=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(""),u=Object(a.a)(o,2),i=u[0],l=u[1],v=Object(s.useState)(null),g=Object(a.a)(v,2),y=g[0],w=g[1];Object(s.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled"),c(e.data)}))}),[]),Object(s.useEffect)((function(){console.log("effect")}),[i]);var C=function(e,t){w({text:e,type:t}),setTimeout((function(){w(null)}),2e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{message:y}),Object(h.jsx)(x,{filterHandler:function(e){console.log(e.target.value),l(e.target.value)},filter:i}),Object(h.jsx)("h3",{children:"Add a new"}),Object(h.jsx)(p,{onSubmit:function(e){var t=n.filter((function(t){return-1!=t.name.toUpperCase().indexOf(e.name.toUpperCase())}));if(t.length>0){if(window.confirm(e.name+" is already added to phonebook, replace the old number with a new one?")){var o=t[0];j(o.id,e).then((function(t){c([].concat(Object(r.a)(n.filter((function(e){return e.id!=o.id}))),[t.data])),C(e.name+" is updated successfully","success"),console.log(t)}))}}else d(e).then((function(t){C(e.name+" is added successfully","success");var o=t.data;c([].concat(Object(r.a)(n),[o])),console.log(t)})).catch((function(e){e.response&&(C(e.response.data.error,"error"),console.warn(e.response.data.error))}))}}),Object(h.jsx)("h3",{children:"Numbers"}),Object(h.jsx)(m,{persons:n,filter:i,handleDelete:function(e){b(e.id).then((function(){C(e.name+" is deleted successfully","success")})).catch((function(t){C("Information of"+e.name+"has already been removed from server","error")}));var t=n.filter((function(t){return t.id!==e.id}));c(t)}})]})};n(41);o.a.render(Object(h.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8d07e6d0.chunk.js.map